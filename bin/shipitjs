#!/usr/bin/env node

var opts = require('opts');
var si = require('../lib/ShipItJS');

var options = [
{
  long : 'write-config',
  description : 'Write default configuration file to ./.shipit.json'
},
{
  long : 'dry-run',
  description : 'Dry run mode'
}
];

var arguments = [ {
  name : "release",
  required : true
} ];

opts.parse(options, arguments,true);

if( opts.get('write-config') ){
	si.writeConfig(process.cwd());
}else{
	si.shipItExec(
	    process.cwd(),
	    opts.arg('release'),
	    {
	      dryRun: opts.get('dry-run'),
	    }
	);
}