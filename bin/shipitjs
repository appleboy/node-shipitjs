#!/usr/bin/env node
var si = require('../lib/ShipIt');
var cmd = require('commander')
.version(si.version)
.option('-x, --exec', 'Run command actually(default dry-run mode)', false);

//If no arguments then display help.
if( process.argv.length < 3 ){
  process.argv.push('--help');
}

//Write config
cmd
.command('write-config')
.description('Write default configuration file to ./.shipit.json')
.action(function() {
  si.writeConfig(process.cwd());
});


//Release
cmd
.command('release [release-type]')
.description('Release the package to NPM. release-type is [major|minor|patch|build|custom].')
.action(function(releaseType) {
  si.shipItExec(process.cwd(), releaseType, {
    dryRun : (this.exec || true),
  });
});

cmd.parse(process.argv);
